
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="images/favicon.ico">
    <title>FMex API Documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight {
  color: #faf6e4;
  background-color: #122b3b;
}
.highlight .gl {
  color: #dee5e7;
  background-color: #4e5d62;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #6c8b9f;
  font-style: italic;
}
.highlight .cp {
  color: #b2fd6d;
  font-weight: bold;
  font-style: italic;
}
.highlight .err {
  color: #fefeec;
  background-color: #cc0000;
}
.highlight .gr {
  color: #fefeec;
  background-color: #cc0000;
}
.highlight .k, .highlight .kd, .highlight .kv {
  color: #f6dd62;
  font-weight: bold;
}
.highlight .o, .highlight .ow {
  color: #4df4ff;
}
.highlight .p, .highlight .pi {
  color: #4df4ff;
}
.highlight .gd {
  color: #cc0000;
}
.highlight .gi {
  color: #b2fd6d;
}
.highlight .ge {
  font-style: italic;
}
.highlight .gs {
  font-weight: bold;
}
.highlight .gt {
  color: #dee5e7;
  background-color: #4e5d62;
}
.highlight .kc {
  color: #f696db;
  font-weight: bold;
}
.highlight .kn {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kp {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kr {
  color: #ffb000;
  font-weight: bold;
}
.highlight .gh {
  color: #ffb000;
  font-weight: bold;
}
.highlight .gu {
  color: #ffb000;
  font-weight: bold;
}
.highlight .kt {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .no {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nc {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nd {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nn {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .bp {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .ne {
  color: #b2fd6d;
  font-weight: bold;
}
.highlight .nl {
  color: #ffb000;
  font-weight: bold;
}
.highlight .nt {
  color: #ffb000;
  font-weight: bold;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #f696db;
  font-weight: bold;
}
.highlight .ld {
  color: #f696db;
  font-weight: bold;
}
.highlight .ss {
  color: #f696db;
  font-weight: bold;
}
.highlight .s, .highlight .sb, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .sr, .highlight .s1 {
  color: #fff0a6;
  font-weight: bold;
}
.highlight .se {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .sc {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .si {
  color: #4df4ff;
  font-weight: bold;
}
.highlight .nb {
  font-weight: bold;
}
.highlight .ni {
  color: #999999;
  font-weight: bold;
}
.highlight .w {
  color: #BBBBBB;
}
.highlight .nf {
  color: #a8e1fe;
}
.highlight .py {
  color: #a8e1fe;
}
.highlight .na {
  color: #a8e1fe;
}
.highlight .nv, .highlight .vc, .highlight .vg, .highlight .vi {
  color: #a8e1fe;
  font-weight: bold;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="zh" data-languages="[&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <a href='https://fmex.com'><img src="images/logo.png" class="logo" alt="Logo" /></a>
        <div class="lang-selector">
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" />
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#45fa4e00db" class="toc-h1 toc-link" data-title="">介绍</a>
          </li>
          <li>
            <a href="#32c808cbe5" class="toc-h1 toc-link" data-title="">认证</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#12907e94be" class="toc-h2 toc-link" data-title="">访问限制</a>
                  </li>
                  <li>
                    <a href="#api" class="toc-h2 toc-link" data-title="api">API 签名</a>
                  </li>
                  <li>
                    <a href="#05e32f581f" class="toc-h2 toc-link" data-title="">完整示例</a>
                  </li>
                  <li>
                    <a href="#header" class="toc-h2 toc-link" data-title="header">header 参数名称</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#a716ef8f2b" class="toc-h1 toc-link" data-title="">公开接口</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#b42bf4cdb4" class="toc-h2 toc-link" data-title="">获取交易所当前所有交易对</a>
                  </li>
                  <li>
                    <a href="#4b9a55b0b9" class="toc-h2 toc-link" data-title="">获取时间</a>
                  </li>
                  <li>
                    <a href="#b02aba99e5" class="toc-h2 toc-link" data-title="">获取币种</a>
                  </li>
                  <li>
                    <a href="#c510ef7f39" class="toc-h2 toc-link" data-title="">获取指数列表</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#8e4b902c12" class="toc-h1 toc-link" data-title="">行情</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#35c492adbd" class="toc-h2 toc-link" data-title="">行情概述</a>
                  </li>
                  <li>
                    <a href="#websocket" class="toc-h2 toc-link" data-title="websocket">WebSocket 首次建立连接</a>
                  </li>
                  <li>
                    <a href="#websocket-heartbeat" class="toc-h2 toc-link" data-title="websocket-heartbeat">WebSocket 连接保持 - heartbeat</a>
                  </li>
                  <li>
                    <a href="#websocket-3" class="toc-h2 toc-link" data-title="websocket">WebSocket 订阅</a>
                  </li>
                  <li>
                    <a href="#ticker" class="toc-h2 toc-link" data-title="ticker">获取 ticker 数据</a>
                  </li>
                  <li>
                    <a href="#50f4407ea4" class="toc-h2 toc-link" data-title="">获取最新的深度明细</a>
                  </li>
                  <li>
                    <a href="#6477a1394e" class="toc-h2 toc-link" data-title="">获取最新的成交明细</a>
                  </li>
                  <li>
                    <a href="#candle" class="toc-h2 toc-link" data-title="candle">获取 Candle 信息</a>
                  </li>
                  <li>
                    <a href="#02d90e4564" class="toc-h2 toc-link" data-title="">获取当前系统指数所有指数</a>
                  </li>
                  <li>
                    <a href="#164308eda4" class="toc-h2 toc-link" data-title="">获取某个指数的最近历史值</a>
                  </li>
                  <li>
                    <a href="#1cc2931276" class="toc-h2 toc-link" data-title="">获取汇率</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#c3d92b20c8" class="toc-h1 toc-link" data-title="">账户</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#035f475bd4" class="toc-h2 toc-link" data-title="">查询当前用户账户余额</a>
                  </li>
                  <li>
                    <a href="#52cbbdca0e" class="toc-h2 toc-link" data-title="">保证金转出至钱包</a>
                  </li>
                  <li>
                    <a href="#gt" class="toc-h2 toc-link" data-title="gt">查询一个转出操作（合约-&gt;钱包）的当前执行状态</a>
                  </li>
                  <li>
                    <a href="#20ad34123e" class="toc-h2 toc-link" data-title="">查询转账日志</a>
                  </li>
                  <li>
                    <a href="#29903d277b" class="toc-h2 toc-link" data-title="">分页查询合约每日交易量</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#81b3798beb" class="toc-h1 toc-link" data-title="">订单</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#804ca63a95" class="toc-h2 toc-link" data-title="">订单模型说明</a>
                  </li>
                  <li>
                    <a href="#4a3e521c3b" class="toc-h2 toc-link" data-title="">创建新的订单</a>
                  </li>
                  <li>
                    <a href="#3eedd32d80" class="toc-h2 toc-link" data-title="">取消订单</a>
                  </li>
                  <li>
                    <a href="#14f3f3c64c" class="toc-h2 toc-link" data-title="">查询活动订单</a>
                  </li>
                  <li>
                    <a href="#e7decd3f1d" class="toc-h2 toc-link" data-title="">查询活动订单详情</a>
                  </li>
                  <li>
                    <a href="#id" class="toc-h2 toc-link" data-title="id">通过订单id获取订单详情</a>
                  </li>
                  <li>
                    <a href="#515c1e61e5" class="toc-h2 toc-link" data-title="">查询历史订单</a>
                  </li>
                  <li>
                    <a href="#d5c6914f15" class="toc-h2 toc-link" data-title="">查询订单成交历史</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#25a424cad9" class="toc-h1 toc-link" data-title="">仓位</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#9208604e00" class="toc-h2 toc-link" data-title="">获取仓位列表</a>
                  </li>
                  <li>
                    <a href="#dcfca0d743" class="toc-h2 toc-link" data-title="">设置仓位杠杆</a>
                  </li>
                  <li>
                    <a href="#9abbc07c5f" class="toc-h2 toc-link" data-title="">设置仓位保证金</a>
                  </li>
                  <li>
                    <a href="#21dd07728a" class="toc-h2 toc-link" data-title="">设置仓位风险等级</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#3efe4ff693" class="toc-h1 toc-link" data-title="">自动交易</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://exchange.fcoin.pro/settings/api'>申请api 密钥</a></li>
            <li><a href='https://exchange-testnet.fcoin.com/settings/api'>testnet 申请api 密钥</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='45fa4e00db'>介绍</h1>
<p>通过了解以下信息，您可以方便的使用 FMex 提供的 API 来接入 FMex 交易平台。</p>

<p>真实交易API域名：api.fmex.com</p>

<p>模拟交易API域名：api.testnet.fmex.com</p>

<p>API访问地址：https://api.fmex.com/<path>，请注意我们仅支持https访问，不支持http访问。</p>

<p>API请求：仅支持GET或POST请求。</p>

<p>如果为GET请求，所有请求参数以queryString方式传入，例如：/v1/contracts/orders/open?symbol=BTCUSD_P</p>

<p>如果为POST请求，所有请求参数以JSON形式作为Request Body传入。请求类型必须为Content-Type: application/json。</p>
<h1 id='32c808cbe5'>认证</h1>
<p>FMex 使用 FCoin testnet 的API key 和 API secret 进行验证，请访问 <a href="https://exchange.fcoin.com/settings/api">设置中心</a>，获取 API key 和 API secret。</p>

<p>FMex 使用 FCoin 的 API 请求，除公开的 API 外都需要携带 API key 以及签名</p>
<h2 id='12907e94be'>访问限制</h2>
<p>目前访问频率为每个用户 100次 / 10秒，未来会按照业务区分访问频率限制。</p>
<h2 id='api'>API 签名</h2>
<p>签名前准备的数据如下：</p>

<p><code>HTTP_METHOD</code> + <code>HTTP_REQUEST_URI</code> + <code>TIMESTAMP</code> + <code>POST_BODY</code></p>

<p>连接完成后，进行 <code>Base64</code> 编码，对编码后的数据进行 <code>HMAC-SHA1</code> 签名，并对签名进行二次 <code>Base64</code> 编码，各部分解释如下：</p>

<aside class="warning">
请注意需要进行两次 `Base64` 编码！
</aside>
<h3 id='http_method'>HTTP_METHOD</h3>
<p><code>GET</code>, <code>POST</code>, 需要大写</p>
<h3 id='http_request_uri'>HTTP_REQUEST_URI</h3>
<p>真实交易地址：
<code>https://api.fmex.com/</code> 为 API 的请求前缀
模拟交易地址
<code>https://api.testnet.fmex.com/</code> 为 API 的请求前缀</p>

<p>后面再加上真正要访问的资源路径，如 <code>orders?param1=value1</code>，最终即 <code>https://api.fmex.com/orders?param1=value1</code></p>

<p>对于请求的 URI 中的参数，需要按照字母表排序！</p>

<p>即如果请求的 URI 为 <code>https://api.fmex.com/orders?c=value1&amp;b=value2&amp;a=value3</code>，则进行签名时，应先将请求参数按照字母表排序，最终进行签名的 URI 为 <code>https://XXX/orders?a=value3&amp;b=value2&amp;c=value1</code>，
请注意，原请求 URI 中的三个参数顺序为 <code>c, b, a</code>，排序后为 <code>a, b, c</code>。</p>
<h3 id='timestamp'>TIMESTAMP</h3>
<p>访问 API 时的 UNIX EPOCH 时间戳，需要和服务器之间的时间差少于 30 秒</p>
<h3 id='post_body'>POST_BODY</h3>
<p>如果是 <code>POST</code> 请求，<code>POST</code> 请求数据也需要被签名，签名规则如下：</p>

<p>所有请求的 key 按照字母顺序排序，然后进行 url 参数化，并使用 <code>&amp;</code> 连接。</p>

<aside class="warning">
请注意 POST_BODY 的键值需要按照字母表排序！
</aside>

<blockquote>
<p>如果请求数据为：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"passowrd"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>则先将 key 按照字母排序，然后进行 url 参数化，即：</p>
</blockquote>
<pre class="highlight plaintext"><code>password=password
username=username
</code></pre>
<blockquote>
<p>因为 <code>p</code> 在字母表中的排序在 <code>u</code> 之前，所以 <code>password</code> 要放在 <code>username</code> 之前，然后使用 <code>&amp;</code> 进行连接，即：</p>
</blockquote>
<pre class="highlight plaintext"><code>password=password&amp;username=username
</code></pre><h2 id='05e32f581f'>完整示例</h2>
<blockquote>
<p>对于如下的请求：</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.fmex.com/orders

{
  "symbol":"btcusd_p",
  "type":"limit",
  "direction":"short",
  "source":"web",
  "price":5500,
  "quantity":100
}

timestamp: 1523069544359
</code></pre>
<blockquote>
<p>签名前的准备数据如下：</p>
</blockquote>
<pre class="highlight plaintext"><code>POSTPOSThttps://api.fmex.com/v3/contracts/orders1571109222426direction=short&amp;price=5500&amp;quantity=100&amp;source=WEB&amp;symbol=btcusd_p&amp;type=limit
</code></pre>
<blockquote>
<p>进行 Base64 编码，得到：</p>
</blockquote>
<pre class="highlight plaintext"><code>UE9TVGh0dHBzOi8vYXBpLmZtZXguY29tL3YzL2NvbnRyYWN0cy9vcmRlcnMxNTcxMTA5MjIyNDI2ZGlyZWN0aW9uPXNob3J0JnByaWNlPTU1MDAmcXVhbnRpdHk9MTAwJnNvdXJjZT1XRUImc3ltYm9sPWJ0Y3VzZF9wJnR5cGU9bGltaXQ=
</code></pre>
<blockquote>
<p>拷贝在申请 API Key 时获得的秘钥（API SECRET），下面的签名结果采用 <code>ebfaeef06e2e49e1bc7e535c2766bbe6</code> 作为示例，</p>

<p>对得到的结果使用秘钥进行 <code>HMAC-SHA1</code> 签名，并对二进制结果进行 <code>Base64</code> 编码，得到：</p>
</blockquote>
<pre class="highlight plaintext"><code>s37ML6NwRLqMco75wCqsXFVz5iw=
</code></pre>
<blockquote>
<p>即生成了用于向 API 服务器进行验证的最终签名</p>
</blockquote>
<h2 id='header'>header 参数名称</h2>
<ul>
<li><code>FC-ACCESS-KEY</code></li>
<li><code>FC-ACCESS-SIGNATURE</code></li>
<li><code>FC-ACCESS-TIMESTAMP</code></li>
</ul>
<h1 id='a716ef8f2b'>公开接口</h1><h2 id='b42bf4cdb4'>获取交易所当前所有交易对</h2>
<p>此 API 用于获取交易所当前所有交易对。</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /v2/public/contracts/symbols</code></p>
<h2 id='4b9a55b0b9'>获取时间</h2>
<p>此 API 用于获取系统时间</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /v2/public/server-time</code></p>
<h2 id='b02aba99e5'>获取币种</h2>
<p>此 API 用于获取币种</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /v2/public/contracts/currencies</code></p>
<h2 id='c510ef7f39'>获取指数列表</h2>
<p>此 API 用于获取指数列表</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET /v2/public/indexes/symbols</code></p>
<h1 id='8e4b902c12'>行情</h1><h2 id='35c492adbd'>行情概述</h2>
<p>行情是一个全公开的 API, 当前同时提供了 HTTP 和 WebSocket 的 API.
为确保可以更及时的获得行情, 推荐使用 WebSocket 进行接入.
为尽可能保证行情的实时性能, 当前公开部分只能获取最近一段时间的行情, 如果有需要获取全量或者历史行情, 请咨询 <code>support@fmex.com</code></p>

<p>所有 HTTP 请求的 URL base 为: <code>https://api.fmex.com/</code></p>

<p>所有 WebSocket 请求的 URL 为: <code>wss://api.fmex.com/v2/ws</code></p>

<p>下文会统一术语:</p>

<ul>
<li><code>topic</code> 表示订阅的主题</li>
<li><code>symbol</code> 表示对应交易币种. 所有币种区分的 topic 都在 topic 末尾.</li>
<li><code>ticker</code> 行情 tick 信息, 包含最新成交价, 最新成交量, 买一卖一, 近 24 小时成交量.</li>
<li><code>depth</code> 表示行情深度, 买卖盘, 盘口.</li>
<li><code>level</code> 表示行情深度类型. 如 <code>L20</code>, <code>L100</code>.</li>
<li><code>trade</code> 表示最新成交, 最新交易.</li>
<li><code>candle</code> 表示蜡烛图, 蜡烛棒, K 线.</li>
<li><code>resolution</code> 表示蜡烛图的种类. 如 <code>M1</code>, <code>M15</code>.</li>
<li><code>base volume</code> 表示基准货币成交量, 如 btcusdt 中 btc 的量.</li>
<li><code>quote volume</code> 表示计价货币成交量, 如 btcusdt 中 usdt 的量</li>
<li><code>ts</code> 表示推送服务器的时间. 是毫秒为单位的数字型字段, unix epoch in millisecond.</li>
</ul>
<h2 id='websocket'>WebSocket 首次建立连接</h2>
<p>连接成功服务器会发送一个欢迎信息</p>

<blockquote>
<p>连接成功后服务器返回信息:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"hello"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ts"</span><span class="p">:</span><span class="mi">1523693784042</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<ul>
<li><code>ts</code>: 推送服务器当前的时间.</li>
</ul>
</blockquote>
<h2 id='websocket-heartbeat'>WebSocket 连接保持 - heartbeat</h2><pre class="highlight python tab-python"><code><span class="c"># WebSocket 向服务端发送 ping 维持心跳</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">fcoin</span>

<span class="n">api</span> <span class="o">=</span> <span class="n">fcoin</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="s">'key'</span><span class="p">,</span> <span class="s">'secret'</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
<span class="n">now_ms</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
<span class="n">api</span><span class="o">.</span><span class="n">market</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="n">now_ms</span><span class="p">)</span>
</code></pre>
<p>WebSocket 客户端和 WebSocket 服务器建立连接之后，推荐 WebSocket Client 每隔 <em>15s</em>（推荐10～20s） 向服务器发起一次 ping 请求，如果服务器长时间没有接收到客户端的 ping 请求将会主动断开连接。</p>
<h3 id='websocket-2'>WebSocket 请求</h3>
<p>发送 <strong>ping 指令</strong>: <code>{&quot;cmd&quot;:&quot;ping&quot;,&quot;args&quot;:[$client_ts],&quot;id&quot;:&quot;$client_id&quot;}</code></p>

<ul>
<li><code>client_id</code>: 客户端为当前请求指定的自定义 id，服务器端会原样返回</li>
<li><code>client_ts</code>: 客户端当前的时间</li>
</ul>

<blockquote>
<p>ping 指令请求示例：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"cmd"</span><span class="p">:</span><span class="s2">"ping"</span><span class="p">,</span><span class="s2">"args"</span><span class="p">:[</span><span class="mi">1540557696867</span><span class="p">],</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"sample.client.id"</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>ping 指令成功服务器返回：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"sample.client.id"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"ping"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ts"</span><span class="p">:</span><span class="mi">1523693784042</span><span class="p">,</span><span class="w">
  </span><span class="s2">"gap"</span><span class="p">:</span><span class="mi">112</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<ul>
<li><code>gap</code>: 推送服务器处理此语句的时间和客户端传输的时间差.</li>
<li><code>ts</code>:  推送服务器当前的时间.</li>
</ul>
</blockquote>

<aside class="notice">
tip: 可以通过 ping 请求时服务器返回的 ts 和 gap 值获取推送服务器时间和数据传输时间差
</aside>
<h2 id='websocket-3'>WebSocket 订阅</h2>
<p>发送 <strong>sub 指令</strong>: <code>{&quot;cmd&quot;:&quot;sub&quot;,&quot;args&quot;:[&quot;$topic&quot;, ...],&quot;id&quot;:&quot;$client_id&quot;}</code></p>

<ul>
<li><code>client_id</code>: 客户端为当前请求指定的自定义 id，服务器端会原样返回</li>
<li><code>topic</code>: 待订阅的 topic，多个请用英文逗号<code>,</code>分隔，最多可以订阅20个</li>
</ul>

<blockquote>
<p>sub 指令请求示例（单 topic）：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"cmd"</span><span class="p">:</span><span class="s2">"sub"</span><span class="p">,</span><span class="s2">"args"</span><span class="p">:[</span><span class="s2">"ticker.ethbtc"</span><span class="p">]}</span><span class="w">
</span></code></pre>
<blockquote>
<p>sub 指令请求示例（多 topic）：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"cmd"</span><span class="p">:</span><span class="s2">"sub"</span><span class="p">,</span><span class="s2">"args"</span><span class="p">:[</span><span class="s2">"ticker.ethbtc"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ticker.btcusdt"</span><span class="p">]}</span><span class="w">
</span></code></pre>
<blockquote>
<p>订阅成功的响应结果如下：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"topics"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"ticker.ethbtc"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ticker.btcusdt"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>订阅失败的响应结果如下：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"invalid_topics_sample"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="mi">41002</span><span class="p">,</span><span class="w">
  </span><span class="s2">"msg"</span><span class="p">:</span><span class="s2">"invalid sub topic, xxx.M1.xxx"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='ticker'>获取 ticker 数据</h2>
<p>为了使得 ticker 信息组足够小和快, 我们强制使用了列表格式.</p>

<blockquote>
<p>ticker 列表对应字段含义说明:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"最新成交价"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"最近一笔成交的成交量"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"最大买一价"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"最大买一量"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"最小卖一价"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"最小卖一量"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"24小时前成交价"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"24小时内最高价"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"24小时内最低价"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"24小时合约成交张数"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"24小时合约成交BTC数量"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre><h3 id='http'>HTTP 请求</h3>
<p><code>GET https://api.fmex.com/v2/market/ticker/$symbol</code></p>

<blockquote>
<p>HTTP 请求响应结果如下：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ticker.btcusdt"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">680035</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ticker"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="mf">7140.890000000000000000</span><span class="p">,</span><span class="w">
      </span><span class="mf">1.000000000000000000</span><span class="p">,</span><span class="w">
      </span><span class="mf">7131.330000000</span><span class="p">,</span><span class="w">
      </span><span class="mf">233.524600000</span><span class="p">,</span><span class="w">
      </span><span class="mf">7140.890000000</span><span class="p">,</span><span class="w">
      </span><span class="mf">225.495049866</span><span class="p">,</span><span class="w">
      </span><span class="mf">7140.890000000</span><span class="p">,</span><span class="w">
      </span><span class="mf">7140.890000000</span><span class="p">,</span><span class="w">
      </span><span class="mf">7140.890000000</span><span class="p">,</span><span class="w">
      </span><span class="mf">1.000000000</span><span class="p">,</span><span class="w">
      </span><span class="mf">7140.890000000000000000</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='websocket-4'>WebSocket 订阅</h3>
<p>发送 <strong>sub 指令</strong>，topic: <code>ticker.$symbol</code>  (请参考 <code>WebSocket 订阅</code>)</p>

<blockquote>
<p>WebSocket 订阅的通知消息结果如下:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ticker.btcusdt"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">680035</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ticker"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">7140.890000000000000000</span><span class="p">,</span><span class="w">
    </span><span class="mf">1.000000000000000000</span><span class="p">,</span><span class="w">
    </span><span class="mf">7131.330000000</span><span class="p">,</span><span class="w">
    </span><span class="mf">233.524600000</span><span class="p">,</span><span class="w">
    </span><span class="mf">7140.890000000</span><span class="p">,</span><span class="w">
    </span><span class="mf">225.495049866</span><span class="p">,</span><span class="w">
    </span><span class="mf">7140.890000000</span><span class="p">,</span><span class="w">
    </span><span class="mf">7140.890000000</span><span class="p">,</span><span class="w">
    </span><span class="mf">7140.890000000</span><span class="p">,</span><span class="w">
    </span><span class="mf">1.000000000</span><span class="p">,</span><span class="w">
    </span><span class="mf">7140.890000000000000000</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='50f4407ea4'>获取最新的深度明细</h2><h3 id='http-2'>HTTP 请求</h3>
<p><code>GET https://api.fmex.com/v2/market/depth/$level/$symbol</code></p>

<p><code>$level</code> 包含的种类(大小写敏感)：</p>

<table><thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td><code>L20</code></td>
<td>20 档行情深度.</td>
</tr>
<tr>
<td><code>L150</code></td>
<td>150 档行情深度.</td>
</tr>
</tbody></table>

<p>其中 <code>L20</code> 的推送时间会略早于 <code>L150</code>, 推送频次会略多于 <code>L150</code>, 看具体的压力和情况. 此处请按需使用.</p>

<blockquote>
<p>HTTP 请求响应结果如下：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"depth.L20.ethbtc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1523619211000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0.000100000</span><span class="p">,</span><span class="w"> </span><span class="mf">1.000000000</span><span class="p">,</span><span class="w"> </span><span class="mf">0.000010000</span><span class="p">,</span><span class="w"> </span><span class="mf">1.000000000</span><span class="p">],</span><span class="w">
    </span><span class="s2">"asks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">1.000000000</span><span class="p">,</span><span class="w"> </span><span class="mf">1.000000000</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='websocket-5'>WebSocket 订阅</h3>
<p>发送 <strong>sub 指令</strong>，topic: <code>depth.$level.$symbol</code>   (请参考 <code>WebSocket 订阅</code>)</p>

<blockquote>
<p>WebSocket 订阅的通知消息结果如下:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"depth.L20.ethbtc"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1523619211000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0.000100000</span><span class="p">,</span><span class="w"> </span><span class="mf">1.000000000</span><span class="p">,</span><span class="w"> </span><span class="mf">0.000010000</span><span class="p">,</span><span class="w"> </span><span class="mf">1.000000000</span><span class="p">],</span><span class="w">
  </span><span class="s2">"asks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">1.000000000</span><span class="p">,</span><span class="w"> </span><span class="mf">1.000000000</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>bids 和 asks 对应的数组一定是偶数条目, 买(卖)1价, 买(卖)1量, 依次往后排列.</p>
</blockquote>
<h2 id='6477a1394e'>获取最新的成交明细</h2>
<p>通过对比其中的成交 id 大小才能决定是否是更新的成交.{trade id}
需要注意, 常规由于 trade 到 transaction 过程的存在, 公开行情的成交 id 并不实际对应清算系统中的成交 id.
即使成交是一条记录, 也无法保证最新成交在重新获取时候 id 永远保持一致.</p>

<p>PS: 历史行情中, 是可以保证成交 id 保持恒定. {transaction id} 此处只作为行情更新通知, 不应依赖归档使用.</p>
<h3 id='http-3'>HTTP 请求</h3>
<p><code>GET https://api.fmex.com/v2/market/trades/$symbol</code></p>
<h4 id='http-4'>查询参数(HTTP 请求)</h4>
<table><thead>
<tr>
<th>参数</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>before</td>
<td></td>
<td>查询某个 id 之前的 Trade</td>
</tr>
<tr>
<td>limit</td>
<td></td>
<td>默认为 20 条</td>
</tr>
</tbody></table>
<h3 id='websocket-6'>WebSocket 请求</h3>
<p>发送 <strong>req 指令</strong>: <code>{&quot;cmd&quot;:&quot;req&quot;, &quot;args&quot;:[&quot;$topic&quot;, limit],&quot;id&quot;:&quot;$client_id&quot;}</code></p>

<ul>
<li><code>client_id</code>: 客户端为当前请求指定的自定义 id，服务器端会原样返回</li>
<li><code>topic</code>: <code>trade.$symbol</code></li>
<li><code>limit</code>: 需要获取的最近的成交条数</li>
</ul>

<blockquote>
<p>WebSocket 请求成功的响应结果如下：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ts"</span><span class="p">:</span><span class="mi">1523693400329</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">1.000000000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ts"</span><span class="p">:</span><span class="mi">1523419946174</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">76000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"side"</span><span class="p">:</span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price"</span><span class="p">:</span><span class="mf">4.000000000</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">1.000000000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ts"</span><span class="p">:</span><span class="mi">1523419114272</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">74000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"side"</span><span class="p">:</span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price"</span><span class="p">:</span><span class="mf">4.000000000</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">1.000000000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ts"</span><span class="p">:</span><span class="mi">1523415182356</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">71000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"side"</span><span class="p">:</span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price"</span><span class="p">:</span><span class="mf">3.000000000</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='websocket-7'>WebSocket 订阅</h3>
<p>发送 <strong>sub 指令</strong>，topic: <code>trade.$symbol</code>   (请参考 <code>WebSocket 订阅</code>)</p>

<ul>
<li><code>symbol</code>: 对应的交易对</li>
</ul>

<blockquote>
<p>WebSocket 订阅的通知消息结果如下:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"trade.ethbtc"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">76000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">1.000000000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ts"</span><span class="p">:</span><span class="mi">1523419946174</span><span class="p">,</span><span class="w">
  </span><span class="s2">"side"</span><span class="p">:</span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"price"</span><span class="p">:</span><span class="mf">4.000000000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='candle'>获取 Candle 信息</h2><h3 id='http-5'>HTTP 请求</h3>
<p><code>GET https://api.fmex.com/v2/market/candles/$resolution/$symbol</code></p>
<h4 id='http-6'>查询参数(HTTP 请求)</h4>
<table><thead>
<tr>
<th>参数</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>before</td>
<td></td>
<td>查询某个 id 之前的 Candle</td>
</tr>
<tr>
<td>limit</td>
<td></td>
<td>默认为 20 条</td>
</tr>
</tbody></table>

<p>$resolution 包含的种类(大小写敏感)：</p>

<table><thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td><code>M1</code></td>
<td>1 分钟</td>
</tr>
<tr>
<td><code>M3</code></td>
<td>3 分钟</td>
</tr>
<tr>
<td><code>M5</code></td>
<td>5 分钟</td>
</tr>
<tr>
<td><code>M15</code></td>
<td>15 分钟</td>
</tr>
<tr>
<td><code>M30</code></td>
<td>30 分钟</td>
</tr>
<tr>
<td><code>H1</code></td>
<td>1 小时</td>
</tr>
<tr>
<td><code>H4</code></td>
<td>4 小时</td>
</tr>
<tr>
<td><code>H6</code></td>
<td>6 小时</td>
</tr>
<tr>
<td><code>D1</code></td>
<td>1 日</td>
</tr>
<tr>
<td><code>W1</code></td>
<td>1 周</td>
</tr>
<tr>
<td><code>MN</code></td>
<td>1 月</td>
</tr>
</tbody></table>
<h3 id='websocket-8'>WebSocket 请求</h3>
<p>发送 <strong>req 指令</strong>: <code>{&quot;cmd&quot;:&quot;req&quot;,&quot;args&quot;:[&quot;$topic&quot;,limit,before],&quot;id&quot;:&quot;$client_id&quot;}</code></p>

<ul>
<li><code>client_id</code>: 客户端为当前请求指定的自定义 id，服务器端会原样返回</li>
<li><code>topic</code>: <code>candle.$resolution.$symbol</code></li>
<li><code>limit</code>: 需要获取的 candle 条数</li>
<li><code>before</code>: 查询某个 id 之前的 Candle</li>
</ul>

<blockquote>
<p>WebSocket 请求成功的响应结果如下：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"candle.M15.btcusdt"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">1540809840</span><span class="p">,</span><span class="w">
      </span><span class="s2">"seq"</span><span class="p">:</span><span class="mi">24793830600000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"high"</span><span class="p">:</span><span class="mf">6491.74</span><span class="p">,</span><span class="w">  </span><span class="err">#最高价</span><span class="w">
      </span><span class="s2">"low"</span><span class="p">:</span><span class="mf">6489.24</span><span class="p">,</span><span class="w">   </span><span class="err">#最低价</span><span class="w">
      </span><span class="s2">"open"</span><span class="p">:</span><span class="mf">6491.24</span><span class="p">,</span><span class="w">  </span><span class="err">#开盘价</span><span class="w">
      </span><span class="s2">"close"</span><span class="p">:</span><span class="mf">6490.07</span><span class="p">,</span><span class="w"> </span><span class="err">#收盘价</span><span class="w">
      </span><span class="s2">"count"</span><span class="p">:</span><span class="mi">26</span><span class="p">,</span><span class="w">      </span><span class="err">#成交笔数</span><span class="w">
      </span><span class="s2">"base_vol"</span><span class="p">:</span><span class="mf">8.2221</span><span class="p">,</span><span class="err">#成交btc</span><span class="w">
      </span><span class="s2">"quote_vol"</span><span class="p">:</span><span class="mf">53371.531286</span><span class="err">#成交usd</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">1540809900</span><span class="p">,</span><span class="w">
      </span><span class="s2">"seq"</span><span class="p">:</span><span class="mi">24793879800000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"high"</span><span class="p">:</span><span class="mf">6490.47</span><span class="p">,</span><span class="w">
      </span><span class="s2">"low"</span><span class="p">:</span><span class="mf">6487.62</span><span class="p">,</span><span class="w">
      </span><span class="s2">"open"</span><span class="p">:</span><span class="mf">6490.09</span><span class="p">,</span><span class="w">
      </span><span class="s2">"close"</span><span class="p">:</span><span class="mf">6487.62</span><span class="p">,</span><span class="w">
      </span><span class="s2">"count"</span><span class="p">:</span><span class="mi">23</span><span class="p">,</span><span class="w">
      </span><span class="s2">"base_vol"</span><span class="p">:</span><span class="mf">10.8527</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quote_vol"</span><span class="p">:</span><span class="mf">70430.840624</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='websokcet'>WebSokcet 订阅</h3>
<p>发送 <strong>sub 指令</strong>，topic: <code>candle.$resolution.$symbol</code>   (请参考 <code>WebSocket 订阅</code>)</p>

<ul>
<li><code>resolution</code>： 同 HTTP 请求 resolution 参数</li>
</ul>

<blockquote>
<p>WebSocket 订阅的通知消息结果如下:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"candle.M1.ethbtc"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">1523691480</span><span class="p">,</span><span class="w">
  </span><span class="s2">"seq"</span><span class="p">:</span><span class="mi">11400000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"open"</span><span class="p">:</span><span class="mf">2.000000000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"close"</span><span class="p">:</span><span class="mf">2.000000000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"high"</span><span class="p">:</span><span class="mf">2.000000000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"low"</span><span class="p">:</span><span class="mf">2.000000000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"count"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"base_vol"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"quote_vol"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='02d90e4564'>获取当前系统指数所有指数</h2><h3 id='http-7'>HTTP 请求</h3>
<p><code>GET https://api.fmex.com/v2/market/indexes</code></p>

<p>指数含义：</p>

<p>.btcins1d   风险准备金1D</p>

<p>.btcins1h   风险准备金1H</p>

<p>.btcusd_spot    指数价格</p>

<p>.btcusdfair   标记价格</p>

<p>.btcusdfr   预估资金费率</p>

<p>.btcusdfr8h   资金费率8H</p>

<p>.btcusdlr1d   利息差率指数</p>

<p>.btcusdpi   溢价指数</p>

<p>.btcusdpi8h   溢价8H指数</p>

<p>.btcusdpimax    最大溢价边界值指数</p>
<h2 id='164308eda4'>获取某个指数的最近历史值</h2><h3 id='http-8'>HTTP 请求</h3>
<p><code>GET https://api.fmex.com/v2/market/indexes/$indexname</code></p>
<h2 id='1cc2931276'>获取汇率</h2><h3 id='http-9'>HTTP 请求</h3>
<p><code>GET https://api.fmex.com/v2/market/fex</code></p>
<h1 id='c3d92b20c8'>账户</h1><h2 id='035f475bd4'>查询当前用户账户余额</h2>
<p>此api用于查询用户资产</p>
<h3 id='http-request'>HTTP Request</h3>
<p>API路径：<code>GET /v3/contracts/accounts</code></p>

<p>API请求参数：无</p>
<h3 id='api'>API响应：</h3><pre class="highlight plaintext"><code>{
  "status":0,
  "data":
        {币种: [可用余额, 订单冻结金额, 仓位保证金金额]
          "BTC":[2.796888254907565438,0E-18,0E-18]
          }
        }
}
</code></pre><h2 id='52cbbdca0e'>保证金转出至钱包</h2><h3 id='http-request-2'>HTTP Request</h3>
<p>API路径：<code>POST /v3/contracts/transfer/out/request</code></p>
<h3 id='1f9ac54b15'>请求参数</h3>
<table><thead>
<tr>
<th style="text-align: left">字段名称</th>
<th style="text-align: left">是否必须</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">currency</td>
<td style="text-align: left">Y</td>
<td style="text-align: left">币种名称，例如&quot;BTC&quot;</td>
</tr>
<tr>
<td style="text-align: left">transfer_from</td>
<td style="text-align: left">Y</td>
<td style="text-align: left">转账来源，必须为&quot;contracts&quot;</td>
</tr>
<tr>
<td style="text-align: left">transfer_to</td>
<td style="text-align: left">Y</td>
<td style="text-align: left">转账目标，必须为&quot;wallet&quot;</td>
</tr>
<tr>
<td style="text-align: left">amount</td>
<td style="text-align: left">Y</td>
<td style="text-align: left">转账金额，例如：1.024</td>
</tr>
</tbody></table>
<h3 id='4978996777'>请求示例：</h3><pre class="highlight plaintext"><code>{
    "currency":"BTC",
    "transfer_from":"CONTRACTS",
    "transfer_to":"WALLET",
    "amount":1,
}
</code></pre><h3 id='api-2'>API响应：</h3><pre class="highlight plaintext"><code>{
  "status": 0,
  "data": {
    "transfer_from": "contracts",
    "transfer_to": "wallet",
    "amount": 0.1,
    "transfer_id": "179363219767363",
    "currency": "BTC"
  }
}


</code></pre><h2 id='gt'>查询一个转出操作（合约-&gt;钱包）的当前执行状态</h2>
<p>API路径：<code>GET /v3/contracts/transfer/out/{transferId}/status</code></p>

<p>API请求参数：无</p>
<h3 id='api-3'>API响应：</h3><pre class="highlight plaintext"><code>{
  'status': 0,
  'data': {
    'transfer_id': '179364285120578',
    'transfer_from': 'contracts',
    'transfer_to': 'wallet',
    'amount': 0.1,
    'done': True,
    'created_at': 1567682689265,
    'updated_at': 1567682689473,
    'error': False,
    'currency': 'BTC'
  }
}
</code></pre><h2 id='20ad34123e'>查询转账日志</h2>
<p>API路径：<code>GET /v3/contracts/transfer/logs</code></p>

<p>API请求参数：无</p>
<h3 id='api-4'>API响应：</h3><pre class="highlight plaintext"><code>{
  'status': 0,
  'data': {
    'hasMore': False,
    'nextOffsetId': 0,
    'results': [
      {
        'transfer_id': '167600369696833',
        'transfer_from': 'CONTRACTS',
        'transfer_to': 'WALLET',
        'amount': 0.01,
        'done': True,
        'created_at': 1566280321419,
        'updated_at': 1566280321851,
        'error': False,
        'currency': 'BTC'
      }
    ]
  }
}
</code></pre><h2 id='29903d277b'>分页查询合约每日交易量</h2>
<p>GET /v3/broker/auth/contracts/trade_volumes</p>
<h3 id='1f9ac54b15-2'>请求参数</h3>
<table><thead>
<tr>
<th>属性</th>
<th>含义</th>
</tr>
</thead><tbody>
<tr>
<td>has_prev Boolean</td>
<td>是否包含前一页，该参数由前端控制，原样返回</td>
</tr>
<tr>
<td>id String</td>
<td>最后一次分页的ID,非必传</td>
</tr>
<tr>
<td>page_size Integer</td>
<td>请求数量(1-40),默认为40</td>
</tr>
<tr>
<td>symbol String</td>
<td>交易对,例如 BTCUSD_P</td>
</tr>
</tbody></table>
<h3 id='306fc38aa3'>响应结果</h3><pre class="highlight plaintext"><code>{
    "status": "ok",
    "data": {
        "content": [
            {
                "id": "1574352000000", 
                "amount": "0.141933059938008458"
            }
        ],
        "current_elements": 1,
        "has_prev": false,
        "has_next": false,
        "next_page_id": "1574352000000"
    }
}
</code></pre><h1 id='81b3798beb'>订单</h1><h2 id='804ca63a95'>订单模型说明</h2>
<p>订单模型由以下属性构成：</p>

<table><thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>含义解释</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>long</td>
<td>订单ID</td>
</tr>
<tr>
<td><code>sequence_id</code></td>
<td>long</td>
<td>定序ID</td>
</tr>
<tr>
<td><code>margin_currency_id</code></td>
<td>long</td>
<td>保证金Currency ID</td>
</tr>
<tr>
<td><code>direction</code></td>
<td>enum</td>
<td>仓位方向LONG/SHORT</td>
</tr>
<tr>
<td><code>type</code></td>
<td>enum</td>
<td>订单类型LIMIT/MARKET</td>
</tr>
<tr>
<td><code>status</code></td>
<td>enum</td>
<td>参见订单状态说明</td>
</tr>
<tr>
<td><code>features</code></td>
<td>long</td>
<td>订单特性，每个bit表示一种特性：0x01=FOK，0x02=post_only，0x04=Hidden，0x08=IOC，0x8000=爆仓单</td>
</tr>
<tr>
<td><code>price</code></td>
<td>decimal</td>
<td>限价单价格（若为市价单，此处为市价单价格上限或下限）</td>
</tr>
<tr>
<td><code>quantity</code></td>
<td>long</td>
<td>订单数量</td>
</tr>
<tr>
<td><code>fill_price</code></td>
<td>decimal</td>
<td>成交均价</td>
</tr>
<tr>
<td><code>unfilled_quantity</code></td>
<td>long</td>
<td>未成交数量</td>
</tr>
<tr>
<td><code>maker_fee_rate</code></td>
<td>decimal</td>
<td>作为Maker的费率</td>
</tr>
<tr>
<td><code>taker_fee_rate</code></td>
<td>decimal</td>
<td>作为Taker的费率</td>
</tr>
<tr>
<td><code>fee</code></td>
<td>decimal</td>
<td>该订单累计已收取的手续费</td>
</tr>
<tr>
<td><code>trigger_on</code></td>
<td>decimal</td>
<td>Stop订单的触发价格，非Stop订单触发价格始终为0</td>
</tr>
<tr>
<td><code>trailing_base_price</code></td>
<td>decimal</td>
<td>TrailingStop订单的基准价格，非此类型订单则始终为0</td>
</tr>
<tr>
<td><code>trailing_distance</code></td>
<td>decimal</td>
<td>TrailingStop订单的触发价格距离，非此类型订单则始终为0</td>
</tr>
<tr>
<td><code>created_at</code></td>
<td>long</td>
<td>订单创建时间</td>
</tr>
<tr>
<td><code>updated_at</code></td>
<td>long</td>
<td>订单最后修改时间</td>
</tr>
</tbody></table>

<p>订单状态说明：</p>

<table><thead>
<tr>
<th>属性</th>
<th>含义解释</th>
</tr>
</thead><tbody>
<tr>
<td><code>PENDING</code></td>
<td>等待成交</td>
</tr>
<tr>
<td><code>PARTIAL_FILLED</code></td>
<td>部分成交</td>
</tr>
<tr>
<td><code>FULLY_FILLED</code></td>
<td>完全成交</td>
</tr>
<tr>
<td><code>PARTIAL_CANCELLED</code></td>
<td>部分取消</td>
</tr>
<tr>
<td><code>FULLY_CANCELLED</code></td>
<td>全部取消</td>
</tr>
<tr>
<td><code>STOP_PENDING</code></td>
<td>stop订单正在等待触发</td>
</tr>
<tr>
<td><code>STOP_FAILED</code></td>
<td>stop订单被触发，但执行失败（例如：冻结失败）</td>
</tr>
<tr>
<td><code>STOP_CANCELLED</code></td>
<td>stop订单未被触发而取消</td>
</tr>
</tbody></table>
<h2 id='4a3e521c3b'>创建新的订单</h2>
<p>此 API 用于创建新的订单。</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /v3/contracts/orders</code></p>
<h3 id='1f9ac54b15'>请求参数</h3>
<table><thead>
<tr>
<th>参数</th>
<th>是否必须</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td><code>symbol</code></td>
<td>Y</td>
<td>合约代码，例如&quot;BTCUSD_P&quot;</td>
</tr>
<tr>
<td><code>type</code></td>
<td>Y</td>
<td>订单类型，参见OrderType</td>
</tr>
<tr>
<td><code>direction</code></td>
<td>Y</td>
<td>订单方向，参见Direction</td>
</tr>
<tr>
<td><code>source</code></td>
<td>&quot;&quot;</td>
<td>订单来源标识，例如&quot;WEB&quot;, &quot;APP&quot;，字母和数字组合</td>
</tr>
<tr>
<td><code>price</code></td>
<td>仅限价单</td>
<td>限价单报价,只支持1位小数</td>
</tr>
<tr>
<td><code>quantity</code></td>
<td>Y</td>
<td>订单数量，整数，最小为1</td>
</tr>
<tr>
<td><code>trigger_on</code></td>
<td>N</td>
<td>止盈止损订单触发价格</td>
</tr>
<tr>
<td><code>trigger_direction</code></td>
<td>N</td>
<td>止盈止损订单触发条件,&quot;long&quot;,&quot;short&quot;</td>
</tr>
<tr>
<td><code>trailing_distance</code></td>
<td>N</td>
<td>追踪止损订单触发距离</td>
</tr>
<tr>
<td><code>fill_or_kill</code></td>
<td>N</td>
<td>类型为string，是否设置FOK订单，全部成交或全部取消</td>
</tr>
<tr>
<td><code>immediate_or_cancel</code></td>
<td>N</td>
<td>类型为string，是否设置IOC订单，立即成交或全部取消</td>
</tr>
<tr>
<td><code>post_only</code></td>
<td>N</td>
<td>类型为string，是否设置post_only订单</td>
</tr>
<tr>
<td><code>hidden</code></td>
<td>N</td>
<td>类型为string，是否设置隐藏订单</td>
</tr>
<tr>
<td><code>reduce_only</code></td>
<td>N</td>
<td>类型为string，是否设置只减仓订单</td>
</tr>
</tbody></table>

<p>请注意：</p>

<p>订单类型如果为LIMIT，则必须填写price；</p>

<p>trigger_on与trailing_distance不能同时填写</p>

<p>若fill_or_kill=true，则无法设置immediate_or_cancel、post_only、hidden和reduce_only；</p>

<p>若immediate_or_cancel=true，则无法设置fill_or_kill、post_only、hidden和reduce_only；</p>

<p>若post_only=true，则无法设置fill_or_kill、immediate_or_cancel和reduce_only；</p>

<p>若hidden=true，则无法设置fill_or_kill和immediate_or_cancel；</p>

<p>只有MARKET订单与IOC订单可以设置reduce_only=true。</p>

<p>举例说明
普通止盈止损订单：</p>

<p>{</p>

<p>type: &quot;MARKET&quot;,</p>

<p>quantity: 10,</p>

<p>trigger_on: 8000,</p>

<p>trigger_direction: &quot;LONG&quot;,</p>

<p>direction: &quot;LONG&quot;,</p>

<p>...
}</p>

<p>在此示例中，当价格大于等于8000，一个10张合约的市价多单委托将被提交至市场。
如果trigger_direction为short,则表示价格小于等于8000时，一个10张合约的市价空单委托将被提交至市场。</p>

<p>追踪止损：</p>

<p>{</p>

<p>type: &quot;MARKET&quot;,</p>

<p>quantity: 10,</p>

<p>trailing_distance: 100,</p>

<p>trigger_direction: &quot;SHORT&quot;,</p>

<p>direction: &quot;SHORT&quot;,</p>

<p>...
}</p>

<p>一旦用户提交此类型的委托，10张合约的市价买委托将在当前市场价格下跌超过追踪价距100时被提交。</p>

<p>然而，如果市场价格上涨，那么此委托将会追踪此价格，并在市场价格至最高点下跌超过追踪价距100时被执行。</p>

<p>如果trigger_direction和direction同时为long，则表示：一旦用户提交此类型的委托，10张合约的市价买委托将在当前市场价格上涨超过追踪价距100时被提交。</p>
<h3 id='api'>API响应：</h3><pre class="highlight plaintext"><code>{
  "status": 0,
  "data": {
    "id": 167624805711936,  #由API计算的分布式ID
    "sequenceId": 260087,  #由sequence计算的sequenceId
    "type": "LIMIT",  #订单类型LIMIT/MARKET
    "status": "PENDING",  #订单状态
    "direction": "SHORT", #订单方向LONG/SHORT
    "features": 0,        #订单属性，按bit组合：FOK/IOC/HIDDEN/post_only
    "price": 100.0,     #限价价格，仅限LIMIT单
    "quantity": 200,    #数量
    "unfilled_quantity": 200, #未成交数量
    "maker_fee_rate": -0.00025,#maker费率
    "taker_fee_rate": 0.001,   #taker费率
    "fee": 0,                #订单已累积收取的fee
    "trigger_direction": "LONG",#触发方向
    "trigger_on": 0,
    "trailing_base_price": 0,#触发基础价格
    "trailing_distance": 0,#触发距离
    "created_at": 1566283234499, #订单创建时间戳
    "updated_at": 1566283234499, #更新时间戳
    "frozen_margin": 0.034188034188034184,#冻结margin
    "frozen_quantity": 20000,#冻结数量
    "hidden": false #是否隐藏
  }
}
</code></pre><h2 id='3eedd32d80'>取消订单</h2>
<p>此 API 用于取消订单</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST /v3/contracts/orders/&lt;order_id&gt;/cancel</code></p>

<p>说明：
order_id为订单id</p>
<h3 id='1f9ac54b15-2'>请求参数</h3>
<p>无</p>
<h3 id='api-2'>API响应：</h3><pre class="highlight plaintext"><code>{
  "status": 0,
  "data": {
    "id": 167624805711936,  #由API计算的分布式ID
    "sequenceId": 260087,  #由sequence计算的sequenceId
    "type": "LIMIT",  #订单类型LIMIT/MARKET
    "status": "PENDING",  #订单状态
    "direction": "SHORT", #订单方向LONG/SHORT
    "features": 0,        #订单属性，按bit组合：FOK/IOC/HIDDEN/post_only
    "price": 100.0,     #限价价格，仅限LIMIT单
    "quantity": 200,    #数量
    "unfilled_quantity": 200, #未成交数量
    "maker_fee_rate": -0.00025,#maker费率
    "taker_fee_rate": 0.001,   #taker费率
    "fee": 0,                #订单已累积收取的fee
    "trigger_direction": "LONG",#触发方向
    "trigger_on": 0,
    "trailing_base_price": 0,#触发基础价格
    "trailing_distance": 0,#触发距离
    "created_at": 1566283234499, #订单创建时间戳
    "updated_at": 1566283234499, #更新时间戳
    "frozen_margin": 0.034188034188034184,#冻结margin
    "frozen_quantity": 20000,#冻结数量
    "hidden": false, #是否隐藏
    "trailing": false
  }
}
</code></pre><h2 id='14f3f3c64c'>查询活动订单</h2>
<p>此 API 用于查询活动订单</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /v3/contracts/orders/open</code></p>
<h3 id='1f9ac54b15-3'>请求参数</h3>
<p>无</p>
<h3 id='api-3'>API响应：</h3><pre class="highlight plaintext"><code>{
  'status': 0,
  'data': {
    'results': [
      {
        "id": 203090171912,
        "features": 0,
        "price": 1127.00,
        "fee": -0.000196850393700787,
        "fill_price": 1127.0,
        "quantity": 200,
        "unfilled_quantity": 100,
        "maker_fee_rate": -0.000250000000000000,
        "taker_fee_rate": 0.000650000000000000,
        "type": "limit",
        "status": "partial_filled",
        "direction": "long",
        "trigger_direction": "long",
        "trigger_on": 0,
        "trailing_base_price": 0,
        "trailing_distance": 0,
        "created_at": 1577158837098,
        "updated_at": 1577167476836,
        "symbol": "BTCUSD_P",
        "trailing": false
      }
    ]
  }
}
</code></pre><h2 id='e7decd3f1d'>查询活动订单详情</h2>
<p>此 API 用于查询订单详情</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET /v3/contracts/orders/open/&lt;order_id&gt;</code></p>

<p>说明：
order_id为订单id</p>
<h3 id='1f9ac54b15-4'>请求参数</h3>
<p>无</p>
<h3 id='api-4'>API响应：</h3><pre class="highlight plaintext"><code>{
  'status': 0,
  'data': {
    'id': 20309017941912,
    'features': 0,
    'price': 126.0,
    'fee': 0,
    'fill_price': 0.0,
    'quantity': 200,
    'unfilled_quantity': 200,
    'maker_fee_rate': -0.00025,
    'taker_fee_rate': 0.00065,
    'type': 'limit',
    'status': 'pending',
    'direction': 'long',
    'trigger_direction': 'long',
    'trigger_on': 0,
    'trailing_base_price': 0,
    'trailing_distance': 0,
    'created_at': 1577158837767,
    'updated_at': 1577158837767,
    'symbol': 'BTCUSD_P',
    'trailing': False
  }
}
</code></pre><h2 id='id'>通过订单id获取订单详情</h2>
<p>此 API 用于查询所有订单的详情</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>GET /v3/contracts/orders/&lt;order_id&gt;</code></p>

<p>说明：
order_id为订单id</p>
<h3 id='1f9ac54b15-5'>请求参数</h3>
<p>无</p>
<h3 id='api-5'>API响应：</h3><pre class="highlight plaintext"><code>{
  'status': 0,
  'data': {
    'id': 20309017941912,
    'features': 0,
    'price': 126.0,
    'fee': 0,
    'fill_price': 0.0,
    'quantity': 200,
    'unfilled_quantity': 200,
    'maker_fee_rate': -0.00025,
    'taker_fee_rate': 0.00065,
    'type': 'limit',
    'status': 'pending',
    'direction': 'long',
    'trigger_direction': 'long',
    'trigger_on': 0,
    'trailing_base_price': 0,
    'trailing_distance': 0,
    'created_at': 1577158837767,
    'updated_at': 1577158837767,
    'symbol': 'BTCUSD_P',
    'trailing': False
  }
}
</code></pre><h2 id='515c1e61e5'>查询历史订单</h2>
<p>此 API 用于查询历史订单</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>GET /v3/contracts/orders/closed</code></p>
<h3 id='1f9ac54b15-6'>请求参数</h3>
<table><thead>
<tr>
<th>参数</th>
<th>是否必须</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>range</td>
<td>N</td>
<td>查询月份，格式为YYYYMM，例如&quot;201907&quot;，默认为空，表示当前月份。</td>
</tr>
<tr>
<td>symbol</td>
<td>N</td>
<td>用于过滤查询条件，仅筛选指定symbol的订单，默认为空，表示所有symbol。</td>
</tr>
<tr>
<td>offsetId</td>
<td>N</td>
<td>传入当前页的起始id，默认为0，表示第一页。</td>
</tr>
<tr>
<td>limit</td>
<td>N</td>
<td>返回结果集的最大记录数量，范围1～100，默认为100。</td>
</tr>
</tbody></table>
<h3 id='api-6'>API响应：</h3><pre class="highlight plaintext"><code>{
  'status': 0,
  'data': {
    'range': '201908',
    'hasMore': True,
    'nextOffsetId': 163466438508609,
    'results': [
      {
        'id': 163466455285825,
        'sequenceId': 79260,
        'type': 'LIMIT',
        'status': 'FULLY_FILLED',
        'direction': 'SHORT',
        'features': 0,
        'price': 5286.0,
        'quantity': 332,
        'unfilled_quantity': 0,
        'maker_fee_rate': -0.00025,
        'taker_fee_rate': 0.001,
        'fee': -1.570185395384e-05,
        'trigger_direction': 'LONG',
        'trigger_on': 0.0,
        'trailing_base_price': 0.0,
        'trailing_distance': 0.0,
        'created_at': 1565787520849,
        'updated_at': 1565787520849
      },
      {...}
    ]
  }
}
</code></pre><h2 id='d5c6914f15'>查询订单成交历史</h2>
<p>此 API 用于查询订单成交历史</p>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>GET /v3/contracts/orders/&lt;order_id&gt;/matches</code></p>

<p>说明：
order_id为订单id</p>
<h3 id='1f9ac54b15-7'>请求参数</h3>
<p>无</p>
<h3 id='api-7'>API响应：</h3><pre class="highlight plaintext"><code>{
  'status': 0,
  'data': {
    'results': [
      {
        'taker': False,
        'price': 13403.0,
        'quantity': 994.0,
        'fee': -1.8540625233156e-05,
        'created_at': 1566275534853
      }
    ]
  }
}
</code></pre><h1 id='25a424cad9'>仓位</h1><h2 id='9208604e00'>获取仓位列表</h2>
<p>此 API 获取仓位列表。</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /v3/broker/auth/contracts/positions</code></p>
<h3 id='1f9ac54b15'>请求参数</h3>
<p>无</p>
<h3 id='api'>API响应：</h3><pre class="highlight plaintext"><code>{
  'status': 'ok',
  'data': {
    'results': [
      {
        'direction': 'SHORT',  #仓位方向
        'updated_at': 1566271860000,  #仓位最近修改的毫秒时间戳
        'quantity': 0,  #持有合约数量，必须为正，若为0，表示已全部平仓
        'leverage': 0, #仓位设定杠杆率，不一定等于实际杠杆率
        'margin_leverage':0, #实际杠杆率
        'riskLevel': 0, #风险等级
        'max_quantity': 100000, #持有合约数量最大值
        'realized_pnl': -0.036307524734501204, #已实现盈亏，已实现盈亏仅作为统计展示给用户，表示自开仓以来该仓位的盈亏
        'unrealized_pnl':0,#未实现盈亏
        'taker_fee_rate': 0.001, #开仓时确定的仓位平仓taker费率
        'margin': 0.0, #仓位保证金，必须为正 
        'bankruptcy_price': 0.0, #破产价格，以该价格平仓，扣除taker手续费后，其权益恰好为0
        'liquidation_price': 0.0, #强平价格，以该价格平仓，扣除taker手续费后，其剩余权益恰好为仓位价值 x 维持保证金率
        'entry_price': 11017.0, #开仓均价，每次仓位增加或减少时，开仓均价都会调整
        'symbol': 'BTCUSD_P', #仓位合约代码，例如BTCUSD_P
        'closed': True, #仓位是否关闭
        'minimum_maintenance_margin_rate': 0.005 #最小维持保证金，如果仓位保证金降低到此，将立刻触发强平
      }
    ]
  }
}
</code></pre><h2 id='dcfca0d743'>设置仓位杠杆</h2><h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST /v3/contracts/positions/$symbol/leverage</code></p>

<p>symbol：URL参数，该仓位的Symbol名称</p>
<h3 id='1f9ac54b15-2'>请求参数</h3>
<table><thead>
<tr>
<th>参数</th>
<th>是否必须</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>leverage</td>
<td>必填</td>
<td>0～最大允许值，0=全仓，1～最大允许值=逐仓杠杆倍数</td>
</tr>
</tbody></table>
<h3 id='57e26a6943'>请求示例</h3>
<p>{
  &#39;leverage&#39;: 0
}</p>
<h3 id='api-2'>API响应：</h3><pre class="highlight plaintext"><code>{
  'status': 0,
  'data': {
    'leverage': 0
  }
}
</code></pre><h2 id='9abbc07c5f'>设置仓位保证金</h2><h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST /v3/contracts/positions/$symbol/margin</code></p>

<p>symbol：URL参数，该仓位的Symbol名称</p>
<h3 id='1f9ac54b15-3'>请求参数</h3>
<table><thead>
<tr>
<th>参数</th>
<th>是否必须</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>margin</td>
<td>必填</td>
<td>设置的新的仓位保证金</td>
</tr>
</tbody></table>
<h3 id='57e26a6943-2'>请求示例</h3>
<p>{
  &#39;margin&#39;: 0
}</p>
<h3 id='api-3'>API响应：</h3><pre class="highlight plaintext"><code>{
  'status': 0,
  'data': {
    'margin': 0
  }
}
</code></pre><h2 id='21dd07728a'>设置仓位风险等级</h2><h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST /v3/contracts/positions/$symbol/riskLevel</code></p>

<p>symbol：URL参数，该仓位的Symbol名称</p>
<h3 id='1f9ac54b15-4'>请求参数</h3>
<table><thead>
<tr>
<th>参数</th>
<th>是否必须</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>risk_level</td>
<td>必填</td>
<td>0～最大允许值</td>
</tr>
</tbody></table>
<h3 id='57e26a6943-3'>请求示例</h3>
<p>{
  &#39;risk_level&#39;: 0
}</p>
<h3 id='api-4'>API响应：</h3><pre class="highlight plaintext"><code>{
  'status': 0,
  'data': {
    'risk_level': 0
  }
}
</code></pre><h1 id='3efe4ff693'>自动交易</h1>
<p>以下是支持 FMex 的自动交易软件和服务。</p>

<ul>
<li>FMZ发明者量化<br>发明者量化(<a href='https://www.fmz.com/'>fmz.com</a>)是亚洲目前唯一支持商品期货与数字货币的量化交易平台，专注于量化软件平台开发和量化交易策略研究与服务，对目前市场上超过50家主流交易所提供支持。支持JavaScript/Python/C++/My语言/可视化五种编程语言</li>
</ul>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
